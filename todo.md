# 献立・買い物リスト自動生成アプリ TODO

## データベース設計・実装
- [x] データベーススキーマの設計と実装（家族、食事パターン、栄養目標、レシピ、献立、買い物リスト）
- [x] サンプルレシピデータの投入
- [x] データベースマイグレーションの実行

## 家族管理機能
- [x] 家族メンバー登録・編集・削除機能
- [x] アレルギー情報の登録・管理
- [x] 好き嫌い情報の登録・管理
- [x] 栄養目標（PFCバランス）の設定機能

## 食事パターン設定機能
- [x] 曜日別食事パターン設定UI（朝食・昨食・夕食の作る/作らない）
- [x] 食事パターンの保存・編集機能

## 献立自動生成機能
- [x] 献立自動生成アルゴリズムの実装
- [x] 家族プロフィールと栄養目標に基づく献立生成ロジック
- [x] 1週間分の献立表示UI
- [ ] 献立差し替え機能（特定の食事のみ変更）

## レシピ管理機能
- [x] レシピ詳細表示機能
- [x] 家族人数に応じた分量自動調整機能
- [x] ステップバイステップの調理手順表示

## 買い物リスト機能
- [x] 献立から食材自動抽出・合算ロジック
- [x] カテゴリ別食材整理（野菜・肉・魚・調味料など）
- [x] 買い物頻度設定機能（週1回/週2回/週3回）
- [x] 買い物頻度に基づく食材自動分割ロジック
- [x] 買い物リストチェックボックス管理機能

## 栄養情報可視化
- [ ] カロリー・PFC目標達成率グラフ表示
- [ ] 週間栄養サマリーダッシュボード

## UI/UX実装
- [x] レスポンシブデザイン実装
- [x] アクセシビリティ対応（大きな文字サイズ、高コントラスト）
- [x] ナビゲーション構造の実装
- [x] ローディング状態とエラーハンドリング

## テスト・デプロイ
- [x] 統合テストの実施
- [x] vitestテストの作成と実行
- [x] チェックポイントの作成


## 追加機能：レシピ拡充とパターン選択
- [x] レシピデータベースの大幅拡充（30～50種類×複数ジャンル）
- [x] 5つのオススメパターン実装（バランス型、時短型、健康志向型、子ども向け、高齢者向け）
- [x] レシピセット選択UI実装
- [x] 初回セットアップウィザード実装
- [x] 統合テストと動作確認
- [x] 最終チェックポイント作成


## バグ修正・改善
- [x] 献立生成ロジックの改善（パターン反映・重複排除）
- [x] UI日本語化（パターン選択画面など）
- [x] パターン選択の献立への反映
- [x] メニュー変更機能の実装（自動保存）
- [x] 統合テストと動作確認


## 追加機能：属性登録・買い物リスト用途表示・食材ロス管理
- [x] データベーススキーマ拡充（属性・保存期間管理）
- [x] 家族属性登録UI実装
- [x] 買い物リスト食材用途表示機能実装
- [x] 食材ロス管理機能実装
- [x] 食材を活用したメニュー提案機能実装
- [x] 統合テストと動作確認
- [x] 最終チェックポイント作成


## Phase 2: 前週余り食材の次週献立反映機能
- [ ] 前週の買い物リストと実際に使用したメニューを比較するロジック実装
- [ ] 使用されなかった食材を検出するアルゴリズム実装
- [ ] 次週の献立生成時に余り食材を優先的に使用するメニューを提案
- [ ] 余り食材の記録・管理テーブル設計
- [ ] UIで余り食材の確認と反映状況の表示
- [ ] テスト実装と動作確認

## Phase 3: LLMでトレンドメニュー生成機能
- [x] LLM統合の設計（API呼び出し、プロンプト設計）
- [x] トレンドメニュー生成プロシージャの実装
- [x] 生成したレシピをデータベースに保存するロジック
- [x] 生成レシピの品質チェック・バリデーション
- [x] UI統合（レシピ生成ボタン、進捗表示）
- [x] テスト実装と動作確認
- [ ] チェックポイント作成とデプロイ準備

## Phase 2: 前週余り食材の次週献立反映機能（進行中）
- [x] WeeklyMenu.tsx に「この週で作らなかった献立」チェックボックスUI追加
- [x] 選択した献立をデータベースに保存するAPI実装（saveSkippedMeals）
- [x] 余り食材検出ロジック実装
- [x] ユニットテスト実装と成功
- [ ] 献立生成アルゴリズムに余り食材優先ロジックを統合
- [ ] データベーススキーマ拡張（skipped_meals, leftover_ingredients テーブル）
- [ ] チェックポイント作成

## バグ修正
- [x] ホームページの「パターンを選択」ボタンのエラー修正（React Hooksルール違反を修正）


## UI改善
- [x] ダッシュボードのUI改善（カード全体をクリック可能に、ボタンを隠す）


## UX大幅改善（ダッシュボード）
- [ ] ダッシュボードの3つのカード（家族メンバー、今週の献立、栄養目標）を削除
- [ ] メンバーカードをクリック → メンバー一覧モーダル表示 → 編集可能な実装
- [ ] 献立カードをクリック → 献立一覧モーダル表示 → 編集可能な実装
- [ ] 栄養目標カードをクリック → 栄養目標設定モーダル表示 → 編集可能な実装
- [ ] シンプルで直感的なUIに統一
- [ ] テスト実装と動作確認


## 週次自動メニュー生成機能
- [ ] recipes テーブルに generatedAt フィールドを追加（レシピ生成日時）
- [ ] LLMメニュー生成時に generatedAt を記録するロジック実装
- [ ] 献立生成時に最新のレシピ（generatedAt が最新）を優先的に使用するロジック実装
- [ ] 週次スケジュール設定API実装（曜日・時刻を保存）
- [ ] バックグラウンドジョブで週次LLMメニュー生成を自動実行
- [ ] ダッシュボードで自動生成スケジュール設定UI実装
- [ ] テスト実装と動作確認


## 未実装機能の完成
- [x] ダッシュボードにメンバー一覧モーダル実装（カードクリック → 一覧表示 → 編集可能）
- [x] ダッシュボードに献立一覧モーダル実装（カードクリック → 一覧表示 → 編集可能）
- [x] 週次自動メニュー生成実装（Manus scheduleツール使用）
- [x] テスト実装と動作確認
